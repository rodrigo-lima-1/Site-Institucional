<!-- EVENTOS PAGE -->
<link rel="stylesheet" href="../styles/eventos.css">
<div class="page-content" id="eventos-page">
  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <h1 class="hero-title">Eventos</h1>
        <p class="hero-subtitle">
          Participe dos nossos workshops, palestras e eventos para se manter atualizado 
          com as √∫ltimas tend√™ncias em tecnologia e networking.
        </p>
      </div>
    </div>
  </section>

  <!-- Filtros Section -->
  <section class="section" id="filtros-section">
    <div class="container">
      <div class="filters-container">
        <button class="filter-btn active" data-filter="all" onclick="filterEvents('all')">
          Todos os Eventos
        </button>
        <button class="filter-btn" data-filter="upcoming" onclick="filterEvents('upcoming')">
          Pr√≥ximos Eventos
        </button>
        <button class="filter-btn" data-filter="past" onclick="filterEvents('past')">
          Eventos Passados
        </button>
        <button class="filter-btn" data-filter="workshop" onclick="filterEvents('workshop')">
          Workshops
        </button>
        <button class="filter-btn" data-filter="palestra" onclick="filterEvents('palestra')">
          Palestras
        </button>
      </div>
    </div>
  </section>

  <!-- Pr√≥ximos Eventos Section -->
  <section class="section" id="upcoming-events-section">
    <div class="container">
      <h2 class="section-title">Pr√≥ximos Eventos</h2>
      <p class="section-subtitle">
        N√£o perca as oportunidades de aprendizado e networking que preparamos para voc√™.
      </p>
      <div id="upcoming-events-container">
        <!-- Eventos futuros ser√£o carregados dinamicamente -->
      </div>
    </div>
  </section> 

  <!-- Eventos Passados Section -->
  <section class="section" id="past-events-section">
    <div class="container">
      <h2 class="section-title">Eventos Anteriores</h2>
      <p class="section-subtitle">
        Relembre alguns dos nossos eventos passados e veja o impacto que causaram na comunidade.
      </p>
      <div id="past-events-container">
        <!-- Eventos passados ser√£o carregados dinamicamente -->
      </div>
    </div>
  </section>

  <!-- Newsletter Section -->
  <section class="section" id="newsletter-section">
    <div class="container text-center">
      <h2 class="section-title">Fique Por Dentro dos Pr√≥ximos Eventos</h2>
      <p class="section-subtitle">
        Inscreva-se em nossa newsletter e seja o primeiro a saber sobre novos workshops,
        palestras e oportunidades de aprendizado.
      </p>
      <div class="newsletter-form">
        <form id="newsletter-form">
          <input
            type="email"
            id="newsletter-email"
            placeholder="Seu melhor e-mail"
            required
          >
          <button
            type="submit"
            class="btn"
          >
            Inscrever-se
          </button>
        </form>
        <p>
          Prometemos n√£o enviar spam. Voc√™ pode cancelar a inscri√ß√£o a qualquer momento.
        </p>
      </div>
    </div>
  </section>
</div>



<script type="module">
import eventosContent from '/src/data/eventos_content.js';
// Script espec√≠fico da p√°gina Eventos
var allEvents = [];
var currentFilter = 'all';

document.addEventListener('DOMContentLoaded', function() {
  // Carregar todos os eventos
  console.log("Carregando eventos...");
  loadAllEvents();
  
  // Configurar formul√°rio de newsletter
  console.log("Configurando formul√°rio de newsletter...");
  setupNewsletterForm();
  
  // Adicionar anima√ß√µes aos elementos
  console.log("Configurando observadores de elementos...");
  observeElements();
});

function loadAllEvents() {
  const upcomingEvents = (eventosContent.upcomingEvents?.events || []).map(e => ({ 
    ...e,
    // Determinar tipo baseado no t√≠tulo
    type: e.title.toLowerCase().includes('workshop') ? 'workshop' :
          e.title.toLowerCase().includes('palestra') ? 'palestra' :
          e.title.toLowerCase().includes('hackathon') ? 'hackathon' :
          e.title.toLowerCase().includes('feira') ? 'feira' : 'outro',
    status: 'upcoming'
  }));

  const pastEvents = (eventosContent.pastEvents?.events || []).map(e => ({
    ...e,
    type: e.title.toLowerCase().includes('bootcamp') ? 'workshop' :
          e.title.toLowerCase().includes('feira') ? 'feira' : 'outro',
    status: 'past'
  }));

  allEvents = [...upcomingEvents, ...pastEvents];
  renderEvents();
}

function renderEvents() {
  console.log('Eventos carregados:', allEvents);
  console.log('Filtro atual:', currentFilter);
  const upcomingContainer = document.getElementById('upcoming-events-container');
  const pastContainer = document.getElementById('past-events-container');
  
  if (!upcomingContainer || !pastContainer || !window.cardComponent) return;

  // Filtrar eventos
  const filteredEvents = filterEventsByType(allEvents, currentFilter);
  
  // Renderizar eventos futuros
  const upcomingEvents = filteredEvents.filter(event => event.status === 'upcoming');
  upcomingContainer.innerHTML = window.cardComponent.renderCardGrid(upcomingEvents, 'event', 3);
  
  // Renderizar eventos passados
  const pastEvents = filteredEvents.filter(event => event.status === 'past');
  pastContainer.innerHTML = window.cardComponent.renderCardGrid(pastEvents, 'event', 3);

  // Atualizar visibilidade das se√ß√µes
  document.getElementById('upcoming-events-section').classList.toggle('hidden', upcomingEvents.length === 0);
  document.getElementById('past-events-section').classList.toggle('hidden', pastEvents.length === 0);
}

function renderEventCard(event) {
  const typeLabels = {
    workshop: 'Workshop',
    palestra: 'Palestra',
    hackathon: 'Hackathon',
    feira: 'Feira'
  };

  return `
    <div class="card event-card fade-in">
      <div class="event-type-badge">${typeLabels[event.type] || event.type}</div>
      <div class="event-date-badge">${event.date}</div>
      <img src="${event.image}" alt="${event.title}" class="card-image" loading="lazy">
      <div class="card-content">
        <h3 class="card-title">${event.title}</h3>
        <div class="card-meta">
          <span>üïí ${event.time}</span>
          <span>üìç ${event.location}</span>
          <span class="event-status ${event.status}">
            ${event.status === 'upcoming' ? 'üìÖ Pr√≥ximo' : '‚úÖ Realizado'}
          </span>
        </div>
        <p class="card-description">${event.description}</p>
        <div class="card-actions">
          ${event.status === 'upcoming' ? 
            `<button class="btn btn-primary" onclick="registerForEvent('${event.id}')">
              Inscrever-se
            </button>` :
            `<button class="btn btn-outline" onclick="viewEventGallery('${event.id}')">
              Ver Galeria
            </button>`
          }
        </div>
      </div>
    </div>
  `;
}

function filterEventsByType(events, filter) {
  if (filter === 'all') return events;
  if (filter === 'upcoming' || filter === 'past') {
    return events.filter(event => event.status === filter);
  }
  return events.filter(event => event.type === filter);
}

function filterEvents(filter) {
  currentFilter = filter;
  
  // Atualizar bot√µes ativos
  document.querySelectorAll('.filter-btn').forEach(btn => {
    btn.classList.remove('active');
  });
  document.querySelector(`[data-filter="${filter}"]`).classList.add('active');
  
  // Re-renderizar eventos
  renderEvents();
}

function registerForEvent(eventId) {
  // Implementar l√≥gica de inscri√ß√£o
  alert(`Redirecionando para inscri√ß√£o do evento ${eventId}...`);
  // Aqui voc√™ implementaria a navega√ß√£o para um formul√°rio de inscri√ß√£o
}

function viewEventGallery(eventId) {
  // Implementar visualiza√ß√£o de galeria
  alert(`Abrindo galeria do evento ${eventId}...`);
  // Aqui voc√™ implementaria um modal com fotos do evento
}

function setupNewsletterForm() {
  const form = document.getElementById('newsletter-form');
  if (!form) return;
  
  form.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const email = document.getElementById('newsletter-email').value;
    
    if (!ValidationUtils.isValidEmail(email)) {
      alert('Por favor, insira um e-mail v√°lido.');
      return;
    }
    
    // Simular envio
    alert('Obrigado! Voc√™ foi inscrito em nossa newsletter.');
    form.reset();
  });
}

function observeElements() {
  // Intersection Observer para anima√ß√µes
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
      }
    });
  }, {
    threshold: 0.1
  });
  
  // Observar elementos com anima√ß√£o
  document.querySelectorAll('.fade-in').forEach(el => {
    el.style.opacity = '0';
    el.style.transform = 'translateY(20px)';
    el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
    observer.observe(el);
  });
}
</script>

