<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Projetos | Conex√£o Metropolitana</title>
  <link rel="stylesheet" href="src/styles/projetos.css">
  <link rel="stylesheet" href="src/styles/main.css">
  <link rel="stylesheet" href="src/styles/components.css">
  <link rel="stylesheet" href="src/styles/responsive.css">
</head>
<body>  
<!-- PROJETOS PAGE -->
<div class="page-content" id="projetos-page">
  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <h1 class="hero-title">Nossos Projetos</h1>
        <p class="hero-subtitle">
          Conhe√ßa as iniciativas que est√£o transformando vidas e comunidades 
          atrav√©s da tecnologia e educa√ß√£o.
        </p>
      </div>
    </div>
  </section>

  <!-- Filtros Section -->
  <section class="section" id="filtros-section">
    <div class="container">
      <div class="filters-container">
        <button class="filter-btn active" data-filter="all" onclick="filterProjects('all')">
          Todos os Projetos
        </button>
        <button class="filter-btn" data-filter="active" onclick="filterProjects('active')">
          Projetos Ativos
        </button>
        <button class="filter-btn" data-filter="completed" onclick="filterProjects('completed')">
          Projetos Conclu√≠dos
        </button>
        <button class="filter-btn" data-filter="education" onclick="filterProjects('education')">
          Educa√ß√£o
        </button>
        <button class="filter-btn" data-filter="social" onclick="filterProjects('social')">
          Impacto Social
        </button>
      </div>
    </div>
  </section>

  <!-- Projetos Ativos Section -->
  <section class="section" id="active-projects-section">
    <div class="container">
      <h2 class="section-title">Projetos Ativos</h2>
      <p class="section-subtitle">
        Iniciativas em andamento que est√£o criando impacto positivo na vida de jovens e comunidades.
      </p>
      <div id="active-projects-container" class="grid grid-2">
        <!-- Projetos ativos ser√£o carregados dinamicamente -->
      </div>
    </div>
  </section>

  <!-- Projetos Conclu√≠dos Section -->
  <section class="section" id="completed-projects-section">
    <div class="container">
      <h2 class="section-title">Projetos Conclu√≠dos</h2>
      <p class="section-subtitle">
        Veja o legado dos nossos projetos finalizados e o impacto duradouro que criaram.
      </p>
      <div id="completed-projects-container" class="grid grid-2">
        <!-- Projetos conclu√≠dos ser√£o carregados dinamicamente -->
      </div>
    </div>
  </section>

  <!-- Impacto dos Projetos Section -->
  <section class="section">
    <div class="container">
      <h2 class="section-title">Impacto dos Nossos Projetos</h2>
      <p class="section-subtitle">
        N√∫meros que demonstram a transforma√ß√£o real que nossos projetos proporcionam.
      </p>
      
      <div class="impact-grid">
        <div class="impact-card">
          <div>üë•</div>
          <div>500+</div>
          <div>Jovens Beneficiados</div>
        </div>

        <div class="impact-card">
          <div>üíº</div>
          <div>85%</div>
          <div>Taxa de Empregabilidade</div>
        </div>

        <div class="impact-card">
          <div>üèÜ</div>
          <div>15</div>
          <div>Pr√™mios Recebidos</div>
        </div>

        <div class="impact-card">
          <div>üåç</div>
          <div>50+</div>
          <div>Comunidades Atendidas</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Depoimentos Section -->
  <section class="section" id="depoimentos-section">
    <div class="container">
      <h2 class="section-title">O Que Dizem Nossos Benefici√°rios</h2>
      <p class="section-subtitle">
        Hist√≥rias reais de transforma√ß√£o atrav√©s dos nossos projetos.
      </p>
      
      <div id="testimonials-container" class="grid grid-3">
        <!-- Depoimentos ser√£o carregados dinamicamente -->
      </div>
    </div>
  </section>

  <!-- Como Participar Section -->
  <section class="section" id="participation-section">
    <div class="container">
      <h2 class="section-title">Como Participar dos Nossos Projetos</h2>
      <p class="section-subtitle">
        Existem v√°rias formas de se envolver e contribuir para o sucesso dos nossos projetos.
      </p>

      <div class="participation-grid">
        <div class="participation-card">
          <div>üéì</div>
          <h3>Seja um Aluno</h3>
          <p>
            Inscreva-se em nossos programas e transforme sua carreira atrav√©s da tecnologia.
          </p>
          <a href="#" class="btn" onclick="navigateTo('contatos')">
            Inscrever-se
          </a>
        </div>

        <div class="participation-card">
          <div>ü§ù</div>
          <h3>Seja um Volunt√°rio</h3>
          <p>
            Compartilhe seu conhecimento e experi√™ncia como mentor ou instrutor.
          </p>
          <a href="#" class="btn" onclick="navigateTo('contatos')">
            Voluntariar-se
          </a>
        </div>

        <div class="participation-card">
          <div>üí∞</div>
          <h3>Seja um Apoiador</h3>
          <p>
            Contribua financeiramente ou com recursos para ampliar nosso impacto.
          </p>
          <a href="#" class="btn" onclick="navigateTo('contatos')">
            Apoiar
          </a>
        </div>
      </div>
    </div>
  </section>
</div>



<script type="module">
import projetosContent from '/src/data/projetos_content.js';

// ‚≠ê VARI√ÅVEIS GLOBAIS
var allProjects = [];
var currentProjectFilter = 'all';

// ‚≠ê FUN√á√ÉO DE ESPERA MELHORADA
function waitForReady(callback) {
  const checkContainers = () => {
    const activeContainer = document.getElementById('active-projects-container');
    const completedContainer = document.getElementById('completed-projects-container');
    const testimonialsContainer = document.getElementById('testimonials-container');
    
    if (activeContainer && completedContainer) {
      console.log('‚úÖ Containers de projetos encontrados, inicializando...');
      callback();
    } else {
      console.log('‚è≥ Aguardando containers de projetos...');
      setTimeout(checkContainers, 100);
    }
  };
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', checkContainers);
  } else {
    checkContainers();
  }
}

// ‚≠ê EXPOR FUN√á√ïES GLOBALMENTE
window.loadAllProjects = loadAllProjects;
window.loadTestimonials = loadTestimonials;
window.observeElements = observeElements;
window.filterProjects = filterProjects;
window.viewProjectDetails = viewProjectDetails;
window.joinProject = joinProject;
window.renderProjects = renderProjects;
window.renderProjectCard = renderProjectCard;
window.renderTestimonialCard = renderTestimonialCard;
window.filterProjectsByType = filterProjectsByType;

// ‚≠ê INICIALIZAR QUANDO PRONTO
waitForReady(function() {
  console.log('üéâ Projetos: Inicializando...');
  loadAllProjects();
  loadTestimonials();
  observeElements();
});

function loadAllProjects() {
  console.log('üìÅ Carregando projetos...');
  
  const activeProjects = (projetosContent.activeProjects?.projects || []).map(p => ({
    ...p,
    category: p.tags && p.tags.includes("Educa√ß√£o") ? 'education' : 'social',
    participants: p.id === 1 ? 45 : 60,
    duration: p.id === 1 ? "12 meses" : "Cont√≠nuo",
    status: 'active'
  }));

  const completedProjects = (projetosContent.completedProjects?.projects || []).map(p => ({
    ...p,
    category: p.tags && p.tags.includes("Educa√ß√£o") ? 'education' : 'social',
    participants: 200,
    duration: p.id === 101 ? "18 meses" : "24 meses",
    status: 'completed'
  }));

  allProjects = [...activeProjects, ...completedProjects];
  console.log('üìä Total de projetos:', allProjects.length);
  console.log('   - Ativos:', activeProjects.length);
  console.log('   - Conclu√≠dos:', completedProjects.length);
  
  renderProjects();
}

function loadTestimonials() {
  console.log('üí¨ Carregando depoimentos...');
  
  const testimonials = [
    {
      id: 1,
      text: "O projeto Code for Change mudou completamente minha perspectiva sobre tecnologia. Hoje trabalho como desenvolvedor e uso meus conhecimentos para criar solu√ß√µes que realmente fazem a diferen√ßa.",
      name: "Pedro Henrique",
      role: "Ex-aluno, Desenvolvedor Full-stack"
    },
    {
      id: 2,
      text: "Participar do TechGirls me deu a confian√ßa que eu precisava para entrar na √°rea de tecnologia. Hoje sou l√≠der t√©cnica em uma startup e mentoro outras mulheres.",
      name: "Ana Carolina",
      role: "Ex-aluna, Tech Lead"
    },
    {
      id: 3,
      text: "Atrav√©s do programa de alfabetiza√ß√£o digital, minha av√≥ conseguiu se conectar com a fam√≠lia durante a pandemia. Foi emocionante ver ela fazendo videochamadas pela primeira vez.",
      name: "Carlos Silva",
      role: "Neto de benefici√°ria"
    }
  ];
  
  const container = document.getElementById('testimonials-container');
  if (container) {
    container.innerHTML = testimonials.map(testimonial => renderTestimonialCard(testimonial)).join('');
    console.log('‚úÖ Depoimentos carregados:', testimonials.length);
  } else {
    console.warn('‚ö†Ô∏è Container de depoimentos n√£o encontrado');
  }
}

function renderProjects() {
  console.log('üé® Renderizando projetos - filtro:', currentProjectFilter);
  
  const activeContainer = document.getElementById('active-projects-container');
  const completedContainer = document.getElementById('completed-projects-container');
  
  if (!activeContainer || !completedContainer) {
    console.warn('‚ö†Ô∏è Containers n√£o encontrados');
    return;
  }
  
  const filteredProjects = filterProjectsByType(allProjects, currentProjectFilter);
  const activeProjects = filteredProjects.filter(project => project.status === 'active');
  const completedProjects = filteredProjects.filter(project => project.status === 'completed');
  
  // Renderizar projetos ativos
  if (activeProjects.length > 0) {
    activeContainer.innerHTML = activeProjects.map(project => renderProjectCard(project)).join('');
  } else {
    activeContainer.innerHTML = '<p class="no-projects">Nenhum projeto ativo encontrado.</p>';
  }
  
  // Renderizar projetos conclu√≠dos
  if (completedProjects.length > 0) {
    completedContainer.innerHTML = completedProjects.map(project => renderProjectCard(project)).join('');
  } else {
    completedContainer.innerHTML = '<p class="no-projects">Nenhum projeto conclu√≠do encontrado.</p>';
  }
  
  // Mostrar/ocultar se√ß√µes baseado no filtro
  const activeSection = document.getElementById('active-projects-section');
  const completedSection = document.getElementById('completed-projects-section');
  
  if (activeSection && completedSection) {
    if (currentProjectFilter === 'completed') {
      activeSection.style.display = 'none';
      completedSection.style.display = 'block';
    } else if (currentProjectFilter === 'active') {
      activeSection.style.display = 'block';
      completedSection.style.display = 'none';
    } else {
      activeSection.style.display = activeProjects.length > 0 ? 'block' : 'none';
      completedSection.style.display = completedProjects.length > 0 ? 'block' : 'none';
    }
  }
  
  console.log('üìà Projetos renderizados:', { 
    active: activeProjects.length, 
    completed: completedProjects.length 
  });
}

function renderProjectCard(project) {
  const tagsHtml = project.tags && project.tags.length > 0 ? 
    `<div class="card-tags">
      ${project.tags.map(tag => `<span class="card-tag">${tag}</span>`).join('')}
    </div>` : '';

  const statusClass = project.status === 'active' ? 'active' : 'completed';
  const statusText = project.status === 'active' ? 'üîÑ Em Andamento' : '‚úÖ Conclu√≠do';

  return `
    <div class="card fade-in">
      <img src="${project.image}" alt="${project.title}" class="card-image" loading="lazy" onerror="this.src='/public/images/placeholder.png'">
      <div class="card-content">
        <h3 class="card-title">${project.title}</h3>
        <div class="card-meta">
          <span class="project-status ${statusClass}">${statusText}</span>
          <span>üë• ${project.participants} participantes</span>
          <span>‚è±Ô∏è ${project.duration}</span>
        </div>
        <p class="card-description">${project.description}</p>
        ${tagsHtml}
        <div class="card-actions">
          <button class="btn btn-primary" onclick="viewProjectDetails(${project.id})">
            Ver Detalhes
          </button>
          ${project.status === 'active' ? 
            `<button class="btn btn-outline" onclick="joinProject(${project.id})">
              Participar
            </button>` : ''
          }
        </div>
      </div>
    </div>
  `;
}

function renderTestimonialCard(testimonial) {
  return `
    <div class="testimonial-card fade-in">
      <div class="testimonial-quote">‚ùù</div>
      <p class="testimonial-text">${testimonial.text}</p>
      <div class="testimonial-author">
        <h4 class="author-name">${testimonial.name}</h4>
        <p class="author-role">${testimonial.role}</p>
      </div>
    </div>
  `;
}

function filterProjectsByType(projects, filter) {
  console.log('üîç Filtrando projetos:', filter);
  
  if (filter === 'all') return projects;
  
  if (filter === 'active' || filter === 'completed') {
    return projects.filter(project => project.status === filter);
  }
  
  if (filter === 'education' || filter === 'social') {
    return projects.filter(project => project.category === filter);
  }
  
  return projects;
}

function filterProjects(filter) {
  console.log('üéØ Mudando filtro para:', filter);
  currentProjectFilter = filter;
  
  // Atualizar bot√µes ativos
  document.querySelectorAll('.filter-btn').forEach(btn => {
    btn.classList.remove('active');
  });
  
  const activeBtn = document.querySelector(`[data-filter="${filter}"]`);
  if (activeBtn) {
    activeBtn.classList.add('active');
  }
  
  // Re-renderizar projetos
  renderProjects();
}

function viewProjectDetails(projectId) {
  console.log('üëÅÔ∏è Visualizando projeto:', projectId);
  alert(`Abrindo detalhes do projeto ${projectId}...`);
  // TODO: Implementar modal ou p√°gina de detalhes
  // Exemplo: window.location.hash = `#projeto-${projectId}`;
}

function joinProject(projectId) {
  console.log('‚úã Inscrevendo no projeto:', projectId);
  alert(`Redirecionando para inscri√ß√£o no projeto ${projectId}...`);
  // TODO: Implementar formul√°rio de inscri√ß√£o ou navega√ß√£o
  // Exemplo: navigateTo('contatos', { projeto: projectId });
}

function observeElements() {
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
      }
    });
  }, {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  });
  
  // Observar todos os elementos com anima√ß√£o
  document.querySelectorAll('.fade-in').forEach(el => {
    el.style.opacity = '0';
    el.style.transform = 'translateY(20px)';
    el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
    observer.observe(el);
  });
  
  console.log('üëÅÔ∏è Observer configurado para', document.querySelectorAll('.fade-in').length, 'elementos');
}

// Log de inicializa√ß√£o
console.log('üì¶ M√≥dulo de projetos carregado');
</script>
</body>